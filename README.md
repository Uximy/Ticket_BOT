# TicketBot

TicketBot - это Discord-бот, предназначенный для управления заявками на поддержку в рамках сервера Discord. Бот позволяет пользователям создавать и закрывать заявки, облегчая работу администраторам и модераторам сервера при обработке запросов на поддержку.

## Возможности

- **Создание заявок**: Пользователи могут создавать новые заявки на поддержку с помощью кнопки которая появится в чате `channel_ticket_id`. Это откроет новый приватный канал, где пользователь и команда поддержки могут обсудить проблему.
- **Закрытие заявок**: После решения проблемы заявку можно закрыть с помощью кнопки которая появится закрытом канале тикета. Беседа будет архивирована для дальнейшего использования.
- **Логирование**: Все действия, связанные с заявками, включая создание и закрытие, записываются для прозрачности и ведения отчетности.
- **Настраиваемые параметры**: Поведение бота можно настроить через файл конфигурации, чтобы он соответствовал нуждам различных серверов.

## Установка

### Предварительные требования

- Node.js (v14 или выше)
- npm (v6 или выше)
- PM2 (необязательно, для управления процессами)

### Шаги

1. **Клонирование репозитория**:
    ```sh
    git clone <repository_url>
    cd TicketBot
    ```

2. **Установка зависимостей**:
    ```sh
    npm install
    ```

3. **Настройка бота**:
    - Отредактируйте файл `Config/config.json`, добавив туда токен вашего бота и другие настройки. Пример конфигурации:

    ```json
    {
        "Token": "TOKEN", //Токен Бота
        "roleImmunityId": [
        "id1",
        "id2"
        ], //массив ролей которые будут иметь доступ к каким-то функциям
        "Guild_id": "Guild_id", //id дискорд канала для взаимодейсвия с каналом дискорда
        "channel_ticket_id": "channel_ticket_id", //id главного канала для тикета в нём находит кнопки создание тикетов
        "id_category_ticket": "id_category_ticket", //id главной категории тикетов, туда отправляются созданные тикеты
        "name_category_close_ticket": "Закрытые тикеты_1", //название категории для закрытие тикетов по нему бот ищет куда добавлять закрытые тикеты (добавляется автоматически после переполнения главной категории по тикетам (менять не нужно) )
        "channelArchivesFilesID": "ChannelCategoryID", //id текстового архива тикетов, туда отправляются тикеты которые архивировались в html файл
        "last_id_message_create_ticket": "last_id_message_create_ticket", //id последнего сообщение по соданию тикета
        "count_ticket": 1 // счётчик тикета (по умолчанию: 1)
    }
    ```

4. **Запуск бота**:
    - Использование Node.js напрямую:
        ```sh
        node ticket.js
        ```
    - Использование PM2 (рекомендуется для продакшена):
        ```sh
        pm2 start ticket.js
        ```

## Модули

Функциональность бота разделена на несколько модулей для лучшей организации и поддерживаемости:

- **createTicket.js**: Обрабатывает создание новых заявок на поддержку.
- **closeTicket.js**: Обрабатывает закрытие и архивирование заявок на поддержку.

## Логирование

Все действия, связанные с заявками, записываются в указанный канал логов. Дополнительно логи сохраняются в файл `logs/logs.log` для справки.

## Структура файлов

- `ecosystem.config.js`: Файл конфигурации PM2 для управления процессом бота.
- `ticket.js`: Основной скрипт бота.
- `Config/config.json`: Файл конфигурации бота.
- `logs/logs.log`: Файл логов для хранения действий, связанных с заявками.
- `modules/`: Директория, содержащая модули бота (`createTicket.js` и `closeTicket.js`).

## Лицензия

Этот проект лицензирован под лицензией MIT. Смотрите файл LICENSE для получения дополнительных сведений.

## Вклад в проект

Вклады приветствуются! Пожалуйста, открывайте issue или отправляйте pull request, если у вас есть улучшения или исправления ошибок.

## Поддержка

Если у вас есть вопросы или нужна помощь, не стесняйтесь открывать issue на GitHub или связываться с поддержкой проекта.

---

Если у вас возникнут какие-либо проблемы или предложения по улучшению, не стесняйтесь обращаться. Удачного использования TicketBot!
